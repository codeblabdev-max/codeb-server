# CodeB Deploy System - ë°°í¬ ì „ëµ ê°€ì´ë“œ

## ëª©ì°¨
1. [ë°°í¬ ì „ëµ ê°œìš”](#ë°°í¬-ì „ëµ-ê°œìš”)
2. [Rolling ë°°í¬](#rolling-ë°°í¬)
3. [Blue-Green ë°°í¬](#blue-green-ë°°í¬)
4. [Canary ë°°í¬](#canary-ë°°í¬)
5. [Preview í™˜ê²½](#preview-í™˜ê²½)
6. [ì „ëµ ì„ íƒ ê°€ì´ë“œ](#ì „ëµ-ì„ íƒ-ê°€ì´ë“œ)
7. [í™˜ê²½ë³„ í¬íŠ¸ ê´€ë¦¬](#í™˜ê²½ë³„-í¬íŠ¸-ê´€ë¦¬)

---

## ë°°í¬ ì „ëµ ê°œìš”

CodeB DeployëŠ” 4ê°€ì§€ ë°°í¬ ë°©ì‹ì„ ì§€ì›í•©ë‹ˆë‹¤:

| ì „ëµ | ë‹¤ìš´íƒ€ì„ | ë¡¤ë°± ì†ë„ | ë¦¬ì†ŒìŠ¤ ìš”êµ¬ | íŠ¸ë˜í”½ ì œì–´ | ê¶Œì¥ í™˜ê²½ |
|------|----------|----------|------------|------------|----------|
| Rolling | ì—†ìŒ | ë³´í†µ | ë‚®ìŒ | ì—†ìŒ | Staging |
| Blue-Green | ì—†ìŒ | ì¦‰ì‹œ | ë†’ìŒ (2ë°°) | ì „ì²´ ì „í™˜ | Production |
| Canary | ì—†ìŒ | ì¦‰ì‹œ | ë³´í†µ | ì ì§„ì  | Production |
| Preview | ì—†ìŒ | - | ë‚®ìŒ | PRë³„ ê²©ë¦¬ | Development |

---

## Rolling ë°°í¬

### ê°œë…

ê¸°ì¡´ ì»¨í…Œì´ë„ˆë¥¼ ìƒˆ ë²„ì „ìœ¼ë¡œ ìˆœì°¨ì ìœ¼ë¡œ êµì²´í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Before:  [v1] [v1] [v1]                               â”‚
â”‚                                                         â”‚
â”‚  Step 1:  [v2] [v1] [v1]  â† ì²« ë²ˆì§¸ êµì²´               â”‚
â”‚  Step 2:  [v2] [v2] [v1]  â† ë‘ ë²ˆì§¸ êµì²´               â”‚
â”‚  Step 3:  [v2] [v2] [v2]  â† ì™„ë£Œ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‚¬ìš© ë°©ë²•

```bash
# Claude Codeì—ì„œ
"myapp stagingì— ë°°í¬í•´ì¤˜"
"myapp stagingì— rolling ë°°í¬í•´ì¤˜"
```

### ë°°í¬ íë¦„

```mermaid
graph TD
    A[ë°°í¬ ì‹œì‘] --> B[ìƒˆ ì´ë¯¸ì§€ Pull]
    B --> C[ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ë°±ì—…]
    C --> D[ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì¤‘ì§€]
    D --> E[ìƒˆ ì»¨í…Œì´ë„ˆ ì‹œì‘]
    E --> F[í—¬ìŠ¤ì²´í¬]
    F -->|ì„±ê³µ| G[íˆìŠ¤í† ë¦¬ ê¸°ë¡]
    F -->|ì‹¤íŒ¨| H[ìë™ ë¡¤ë°±]
    G --> I[ì™„ë£Œ]
    H --> I
```

### ì¥ë‹¨ì 

**ì¥ì :**
- âœ… ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì  (ì¶”ê°€ ë¦¬ì†ŒìŠ¤ ë¶ˆí•„ìš”)
- âœ… ê°„ë‹¨í•œ êµ¬í˜„
- âœ… ì ì§„ì  êµì²´ë¡œ ì•ˆì •ì„± í™•ë³´

**ë‹¨ì :**
- âŒ ë¡¤ë°± ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¼
- âŒ ë²„ì „ í˜¼ì¬ ê¸°ê°„ ë°œìƒ
- âŒ íŠ¸ë˜í”½ ì œì–´ ë¶ˆê°€

### ì í•©í•œ ìƒí™©
- ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½
- ë¹ ë¥¸ ë°˜ë³µ ë°°í¬
- ë¦¬ì†ŒìŠ¤ ì œì•½ì´ ìˆëŠ” í™˜ê²½

---

## Blue-Green ë°°í¬

### ê°œë…

ìƒˆ ë²„ì „(Green)ì„ ì™„ì „íˆ ì¤€ë¹„í•œ í›„, íŠ¸ë˜í”½ì„ í•œ ë²ˆì— ì „í™˜í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: ì¤€ë¹„                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚  Blue    â”‚ â†â”€â”€ â”‚ Traffic  â”‚                         â”‚
â”‚  â”‚  (v1)    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚  Green   â”‚ (ì¤€ë¹„ ì¤‘)                                 â”‚
â”‚  â”‚  (v2)    â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                         â”‚
â”‚  Phase 2: ì „í™˜                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚  Blue    â”‚ (ëŒ€ê¸°)                                    â”‚
â”‚  â”‚  (v1)    â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚  Green   â”‚ â†â”€â”€ â”‚ Traffic  â”‚                         â”‚
â”‚  â”‚  (v2)    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‚¬ìš© ë°©ë²•

```bash
# Claude Codeì—ì„œ
"myapp productionì— blue-green ë°°í¬í•´ì¤˜"
```

### ë°°í¬ íë¦„

```mermaid
graph TD
    A[ë°°í¬ ì‹œì‘] --> B[Green í™˜ê²½ ì¤€ë¹„]
    B --> C[ìƒˆ ì´ë¯¸ì§€ Pull]
    C --> D[Green ì»¨í…Œì´ë„ˆ ì‹œì‘]
    D --> E[Green í—¬ìŠ¤ì²´í¬]
    E -->|ì„±ê³µ| F[íŠ¸ë˜í”½ ì „í™˜]
    E -->|ì‹¤íŒ¨| G[Green ì •ë¦¬]
    F --> H[Blue ëŒ€ê¸° ìƒíƒœ ì „í™˜]
    H --> I[íˆìŠ¤í† ë¦¬ ê¸°ë¡]
    I --> J[ì™„ë£Œ]
    G --> K[ì•Œë¦¼ ì „ì†¡]
    K --> L[ì‹¤íŒ¨]
```

### Caddy ì„¤ì • ì˜ˆì‹œ

```caddyfile
# ì „í™˜ ì „ (Blue í™œì„±)
myapp.codeb.dev {
    reverse_proxy localhost:4001  # Blue
}

# ì „í™˜ í›„ (Green í™œì„±)
myapp.codeb.dev {
    reverse_proxy localhost:4002  # Green
}
```

### ì¥ë‹¨ì 

**ì¥ì :**
- âœ… ì¦‰ì‹œ ë¡¤ë°± ê°€ëŠ¥ (ì„¤ì • ë³€ê²½ë§Œìœ¼ë¡œ)
- âœ… ë¬´ì¤‘ë‹¨ ë°°í¬ ë³´ì¥
- âœ… ìƒˆ ë²„ì „ ì™„ì „ ê²€ì¦ í›„ ì „í™˜

**ë‹¨ì :**
- âŒ ë¦¬ì†ŒìŠ¤ 2ë°° í•„ìš”
- âŒ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ë³µì¡
- âŒ ìƒíƒœ ë™ê¸°í™” ì–´ë ¤ì›€

### ì í•©í•œ ìƒí™©
- Production í™˜ê²½
- ì¤‘ìš” ì„œë¹„ìŠ¤ ë°°í¬
- ë¹ ë¥¸ ë¡¤ë°±ì´ í•„ìš”í•œ ê²½ìš°

---

## Canary ë°°í¬

### ê°œë…

ìƒˆ ë²„ì „ìœ¼ë¡œ íŠ¸ë˜í”½ì„ ì ì§„ì ìœ¼ë¡œ ì´ë™ì‹œí‚¤ë©° ë¬¸ì œë¥¼ ì¡°ê¸°ì— ë°œê²¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: 10% íŠ¸ë˜í”½                                    â”‚
â”‚  [v1] [v1] [v1] [v1] [v1] [v1] [v1] [v1] [v1] [v2]     â”‚
â”‚   â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘      â”‚
â”‚  90% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  10%     â”‚
â”‚                                                         â”‚
â”‚  Phase 2: 50% íŠ¸ë˜í”½                                    â”‚
â”‚  [v1] [v1] [v1] [v1] [v1] [v2] [v2] [v2] [v2] [v2]     â”‚
â”‚   â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘      â”‚
â”‚  50% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  50% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                         â”‚
â”‚  Phase 3: 100% íŠ¸ë˜í”½                                   â”‚
â”‚  [v2] [v2] [v2] [v2] [v2] [v2] [v2] [v2] [v2] [v2]     â”‚
â”‚   â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘      â”‚
â”‚  100% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‚¬ìš© ë°©ë²•

```bash
# Claude Codeì—ì„œ
"myapp productionì— canary ë°°í¬ 10%ë¡œ ì‹œì‘í•´ì¤˜"
"myapp canary ë¹„ìœ¨ 50%ë¡œ ì˜¬ë ¤ì¤˜"
"myapp canary 100%ë¡œ ì™„ë£Œí•´ì¤˜"
```

### ë°°í¬ íë¦„

```mermaid
graph TD
    A[ë°°í¬ ì‹œì‘] --> B[Canary ì»¨í…Œì´ë„ˆ ì‹œì‘]
    B --> C[Canary í—¬ìŠ¤ì²´í¬]
    C -->|ì„±ê³µ| D[íŠ¸ë˜í”½ ë¹„ìœ¨ ì„¤ì •]
    C -->|ì‹¤íŒ¨| E[Canary ë¡¤ë°±]
    D --> F{ëª¨ë‹ˆí„°ë§}
    F -->|ì •ìƒ| G[ë¹„ìœ¨ ì¦ê°€?]
    F -->|ì´ìƒ| E
    G -->|ì˜ˆ| D
    G -->|ì•„ë‹ˆì˜¤ - 100%| H[Stable êµì²´]
    H --> I[ì™„ë£Œ]
    E --> J[ì•Œë¦¼ ì „ì†¡]
    J --> K[ì‹¤íŒ¨]
```

### Caddy ì„¤ì • ì˜ˆì‹œ (ê°€ì¤‘ì¹˜ ë¼ìš°íŒ…)

```caddyfile
myapp.codeb.dev {
    reverse_proxy {
        to localhost:4001 localhost:4002
        lb_policy weighted_random
        # ê°€ì¤‘ì¹˜: 90% v1, 10% v2
    }
}
```

### ë‹¨ê³„ë³„ ë°°í¬ ì˜ˆì‹œ

```yaml
# ê¶Œì¥ Canary ë°°í¬ ë‹¨ê³„
stages:
  - weight: 10
    duration: 10m
    metrics_check: true

  - weight: 25
    duration: 15m
    metrics_check: true

  - weight: 50
    duration: 30m
    metrics_check: true

  - weight: 100
    duration: stable
    metrics_check: false
```

### ì¥ë‹¨ì 

**ì¥ì :**
- âœ… ë¦¬ìŠ¤í¬ ìµœì†Œí™” (ì†Œìˆ˜ ì‚¬ìš©ìë§Œ ì˜í–¥)
- âœ… ì‹¤ì œ íŠ¸ë˜í”½ìœ¼ë¡œ ê²€ì¦
- âœ… ë¹ ë¥¸ ë¡¤ë°± ê°€ëŠ¥
- âœ… A/B í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

**ë‹¨ì :**
- âŒ ë³µì¡í•œ ì„¤ì •
- âŒ ë©”íŠ¸ë¦­ ëª¨ë‹ˆí„°ë§ í•„ìˆ˜
- âŒ ë²„ì „ ê°„ í˜¸í™˜ì„± ìœ ì§€ í•„ìš”

### ì í•©í•œ ìƒí™©
- ëŒ€ê·œëª¨ Production í™˜ê²½
- ì‹ ê·œ ê¸°ëŠ¥ ì ì§„ì  ì¶œì‹œ
- A/B í…ŒìŠ¤íŠ¸
- ë¦¬ìŠ¤í¬ ë¯¼ê°í•œ ë°°í¬

---

## Preview í™˜ê²½

### ê°œë…

PR(Pull Request)ë³„ë¡œ ë…ë¦½ëœ í™˜ê²½ì„ ìƒì„±í•˜ì—¬ ë³€ê²½ì‚¬í•­ì„ ë¯¸ë¦¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Main Branch                                            â”‚
â”‚  â””â”€â”€ Production                                         â”‚
â”‚                                                         â”‚
â”‚  PR #123                                                â”‚
â”‚  â””â”€â”€ https://pr-123.myapp.preview.codeb.dev            â”‚
â”‚                                                         â”‚
â”‚  PR #124                                                â”‚
â”‚  â””â”€â”€ https://pr-124.myapp.preview.codeb.dev            â”‚
â”‚                                                         â”‚
â”‚  PR #125                                                â”‚
â”‚  â””â”€â”€ https://pr-125.myapp.preview.codeb.dev            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‚¬ìš© ë°©ë²•

```bash
# Claude Codeì—ì„œ
"myapp PR-123 preview í™˜ê²½ ë§Œë“¤ì–´ì¤˜"
"myapp preview í™˜ê²½ ëª©ë¡ ë³´ì—¬ì¤˜"
"myapp PR-123 preview ì‚­ì œí•´ì¤˜"
```

### GitHub Actions í†µí•©

```yaml
# .github/workflows/preview.yml
name: Preview Deployment

on:
  pull_request:
    types: [opened, synchronize, reopened, closed]

jobs:
  preview:
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v4

      - name: Deploy Preview
        if: github.event.action != 'closed'
        run: |
          # Preview ë°°í¬ ë¡œì§

      - name: Cleanup Preview
        if: github.event.action == 'closed'
        run: |
          # Preview ì •ë¦¬ ë¡œì§

      - name: Comment PR
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: 'ğŸš€ Preview deployed: https://pr-${{ github.event.number }}.myapp.preview.codeb.dev'
            })
```

### ìë™ ì •ë¦¬

Preview í™˜ê²½ì€ ê¸°ë³¸ 72ì‹œê°„ í›„ ìë™ ì‚­ì œë©ë‹ˆë‹¤:

```typescript
{
  ttlHours: 72,  // ê¸°ë³¸ê°’
  // PR ë‹«í˜ ì‹œ ì¦‰ì‹œ ì‚­ì œ
}
```

---

## ì „ëµ ì„ íƒ ê°€ì´ë“œ

### ì˜ì‚¬ê²°ì • í”Œë¡œìš°ì°¨íŠ¸

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ë°°í¬ í™˜ê²½?     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Developmentâ”‚    â”‚  Staging  â”‚    â”‚Production â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚
          â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Preview  â”‚    â”‚  Rolling  â”‚    â”‚ ë¦¬ìŠ¤í¬ ë ˆë²¨?  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â–¼               â–¼               â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   ë‚®ìŒ   â”‚   â”‚   ë³´í†µ   â”‚   â”‚   ë†’ìŒ   â”‚
                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                             â”‚              â”‚              â”‚
                             â–¼              â–¼              â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Rolling  â”‚   â”‚Blue-Greenâ”‚   â”‚  Canary  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í™˜ê²½ë³„ ê¶Œì¥ ì „ëµ

| í™˜ê²½ | ê¸°ë³¸ ì „ëµ | ëŒ€ì•ˆ ì „ëµ | ì´ìœ  |
|------|----------|----------|------|
| Development | Preview | - | PRë³„ ê²©ë¦¬ í…ŒìŠ¤íŠ¸ |
| Staging | Rolling | - | ë¹ ë¥¸ ë°˜ë³µ, ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ |
| Production (ë‚®ì€ ë¦¬ìŠ¤í¬) | Rolling | Blue-Green | ê°„ë‹¨í•œ ë³€ê²½ |
| Production (ì¤‘ê°„ ë¦¬ìŠ¤í¬) | Blue-Green | Canary | ë¹ ë¥¸ ë¡¤ë°± í•„ìš” |
| Production (ë†’ì€ ë¦¬ìŠ¤í¬) | Canary | - | ì ì§„ì  ê²€ì¦ í•„ìˆ˜ |

### ë³€ê²½ ìœ í˜•ë³„ ê¶Œì¥ ì „ëµ

| ë³€ê²½ ìœ í˜• | ê¶Œì¥ ì „ëµ | ì´ìœ  |
|----------|----------|------|
| ë²„ê·¸ ìˆ˜ì • | Rolling | ë¹ ë¥¸ ë°°í¬ |
| ë§ˆì´ë„ˆ ê¸°ëŠ¥ | Blue-Green | ì•ˆì „í•œ ë¡¤ë°± |
| ë©”ì´ì € ê¸°ëŠ¥ | Canary | ì ì§„ì  ì¶œì‹œ |
| ì¸í”„ë¼ ë³€ê²½ | Blue-Green | ì™„ì „í•œ ê²©ë¦¬ |
| DB ë§ˆì´ê·¸ë ˆì´ì…˜ | Canary + Feature Flag | í˜¸í™˜ì„± ìœ ì§€ |

---

## í™˜ê²½ë³„ í¬íŠ¸ ê´€ë¦¬

### í¬íŠ¸ ë²”ìœ„

| í™˜ê²½ | ì•± í¬íŠ¸ | DB í¬íŠ¸ | Redis í¬íŠ¸ |
|------|---------|---------|------------|
| Staging | 3000-3499 | 5432-5449 | 6379-6399 |
| Production | 4000-4499 | 5450-5469 | 6400-6419 |
| Preview | 5000-5999 | - | - |

### í¬íŠ¸ í• ë‹¹ ì˜ˆì‹œ

```json
{
  "staging": {
    "myapp": {
      "app": 3001,
      "db": 5433,
      "redis": 6380
    },
    "another-app": {
      "app": 3002,
      "db": 5434,
      "redis": 6381
    }
  },
  "production": {
    "myapp-blue": {
      "app": 4001
    },
    "myapp-green": {
      "app": 4002
    }
  },
  "preview": {
    "pr-123": {
      "app": 5001
    },
    "pr-124": {
      "app": 5002
    }
  }
}
```

### í¬íŠ¸ ì¶©ëŒ ë°©ì§€

PortRegistryê°€ ìë™ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ í¬íŠ¸ë¥¼ í• ë‹¹í•©ë‹ˆë‹¤:

```bash
# í¬íŠ¸ í˜„í™© í™•ì¸
"í¬íŠ¸ í• ë‹¹ í˜„í™© ë³´ì—¬ì¤˜"
```

---

## ë‹¤ìŒ ë‹¨ê³„

- [ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼ ê°€ì´ë“œ](04-MONITORING-ALERTING.md) - ë°°í¬ í›„ ëª¨ë‹ˆí„°ë§
- [ë³´ì•ˆ ìŠ¤ìº” ê°€ì´ë“œ](05-SECURITY-SCANNING.md) - ë°°í¬ ì „ ë³´ì•ˆ ê²€ì¦
- [ë¬¸ì œ í•´ê²° ê°€ì´ë“œ](06-TROUBLESHOOTING.md) - ë°°í¬ ë¬¸ì œ í•´ê²°
