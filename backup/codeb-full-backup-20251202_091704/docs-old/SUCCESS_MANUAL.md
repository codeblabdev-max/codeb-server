# CodeB CLI v2.0 - 6ì‹œê°„ ê°œë°œ ì„±ê³µ ë§¤ë‰´ì–¼

## ðŸ† ê°œë°œ ì„±ê³¼ ìš”ì•½ (6ì‹œê°„ ì™„ë£Œ)

**ê°œë°œ ê¸°ê°„**: 2025-08-20 17:50 ~ 23:50 (6ì‹œê°„)
**ìµœì¢… ê²°ê³¼**: âœ… ì™„ì „ ì„±ê³µ - í”„ë¡œë•ì…˜ ë°°í¬ ë° ì‹¤ì œ ë°ì´í„° ë³µì› ì™„ë£Œ

---

## ðŸŽ¯ ë‹¬ì„±ëœ í•µì‹¬ ê¸°ëŠ¥

### 1. **ì™„ì „í•œ ì»¨í…Œì´ë„ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ**
- **Podman ê¸°ë°˜** ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- **ìžë™ í¬íŠ¸ ë§¤í•‘** ë° ë„ë©”ì¸ ì—°ê²°
- **Caddy ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ** ìžë™ SSL ì¸ì¦ì„œ

### 2. **ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…/ë³µì› ì‹œìŠ¤í…œ**
- **4ê°œ API ì—”ë“œí¬ì¸íŠ¸** ì™„ì „ êµ¬í˜„
- **ì‹¤ì œ í”„ë¡œë•ì…˜ ë°ì´í„°** 21ëª… ì‚¬ìš©ìž, 42ê°œ í…Œì´ë¸” ë³µì›
- **ìžë™ ë¡¤ë°±** ë° ì•ˆì „ì„± ë³´ìž¥

### 3. **CLI ë„êµ¬ ì™„ì„±**
- **15ê°œ ëª…ë ¹ì–´** êµ¬í˜„ (deploy, logs, restart, db ë“±)
- **ì‹¤ì‹œê°„ ìƒíƒœ ëª¨ë‹ˆí„°ë§**
- **ì›ê²© ì„œë²„ ê´€ë¦¬**

### 4. **Next.js ì™„ì „ ë°°í¬**
- **í”„ë¡œë•ì…˜ ë¹Œë“œ** 78ê°œ ì •ì  íŽ˜ì´ì§€ ìƒì„±
- **í™˜ê²½ ë³€ìˆ˜** ì™„ì „ ì„¤ì •
- **ì‹¤ì œ ì›¹ì‚¬ì´íŠ¸** ì •ìƒ ìž‘ë™

---

## ðŸ”§ êµ¬ì¶•ëœ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
CodeB CLI v2.0
â”œâ”€â”€ ë¡œì»¬ CLI (codeb-cli-v2.sh)
â”œâ”€â”€ ì›ê²© API ì„œë²„ (codeb-api-server.js)
â”œâ”€â”€ Podman ì»¨í…Œì´ë„ˆ
â”‚   â”œâ”€â”€ App Container (Node.js)
â”‚   â”œâ”€â”€ PostgreSQL Database
â”‚   â””â”€â”€ Redis Cache
â”œâ”€â”€ Caddy í”„ë¡ì‹œ (ìžë™ SSL)
â””â”€â”€ ë„ë©”ì¸ ë§¤í•‘
```

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸

1. **CLI ë„êµ¬** (`codeb-cli-v2.sh`)
   - 825ì¤„ ì™„ì „ êµ¬í˜„
   - 15ê°œ í•µì‹¬ ëª…ë ¹ì–´
   - ì›ê²© API í˜¸ì¶œ ë° ìƒíƒœ ê´€ë¦¬

2. **API ì„œë²„** (`codeb-api-server.js`) 
   - 1,500ì¤„+ ì™„ì „ êµ¬í˜„
   - RESTful API 20ê°œ+ ì—”ë“œí¬ì¸íŠ¸
   - ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…/ë³µì› ì‹œìŠ¤í…œ

3. **ë°±ì—… ì‹œìŠ¤í…œ**
   - ì‹¤ì œ í”„ë¡œë•ì…˜ ë°ì´í„° 2.8MB
   - SQL ê¸°ë°˜ ì™„ì „ ë³µì›
   - ìžë™ ì•ˆì „ì„± ê²€ì‚¬

---

## ðŸš¨ í•´ê²°ëœ í•µì‹¬ ë¬¸ì œë“¤

### 1. **í¬íŠ¸ ë§¤í•‘ í˜¼ëž€ í•´ê²°**
**ë¬¸ì œ**: ë¦¬ìŠ¤íŠ¸ì—ì„œ 4004 í¬íŠ¸ í‘œì‹œë˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” 4000 í¬íŠ¸ ì‚¬ìš©
**í•´ê²°**: Podman ì»¨í…Œì´ë„ˆ í¬íŠ¸ ë§¤í•‘ í™•ì¸ ë° ì •ì •
```bash
podman ps  # 4004:3000 ì˜¬ë°”ë¥¸ ë§¤í•‘ í™•ì¸
```

### 2. **502 Bad Gateway ì™„ì „ í•´ê²°**
**ë¬¸ì œ**: Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œìž‘ ì‹¤íŒ¨
**ì›ì¸ ë¶„ì„**:
- í”„ë¡œë•ì…˜ ë¹Œë“œ ëˆ„ë½
- í™˜ê²½ ë³€ìˆ˜ ë¯¸ì„¤ì •  
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨

**í•´ê²° ê³¼ì •**:
```bash
# 1ë‹¨ê³„: ì˜ì¡´ì„± ì„¤ì¹˜
npm install react-is

# 2ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cat > /app/.env << EOF
DATABASE_URL="postgresql://user:password@10.88.0.13:5432/celly-creative"
JWT_SECRET="..."
ENCRYPTION_KEY="..."
# ... 8ê°œ í•„ìˆ˜ ë³€ìˆ˜
EOF

# 3ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
# IP ì£¼ì†Œ ì§ì ‘ ì‚¬ìš©ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ í•´ê²°

# 4ë‹¨ê³„: í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build  # 78ê°œ ì •ì  íŽ˜ì´ì§€ ìƒì„± ì„±ê³µ

# 5ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œìž‘
npm start  # Ready in 398ms
```

### 3. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ì œ í•´ê²°**
**ë¬¸ì œ**: ì»¨í…Œì´ë„ˆ ê°„ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨
**í•´ê²°**: PostgreSQL ì»¨í…Œì´ë„ˆ IP ì§ì ‘ ì‚¬ìš©
```bash
# ì»¨í…Œì´ë„ˆ IP í™•ì¸
podman inspect celly-creative-postgres | jq -r '.[0].NetworkSettings.IPAddress'
# ê²°ê³¼: 10.88.0.13

# DATABASE_URL ìˆ˜ì •
DATABASE_URL="postgresql://user:password@10.88.0.13:5432/celly-creative"
```

### 4. **ë³´ì•ˆ ë¯¸ë“¤ì›¨ì–´ ì°¨ë‹¨ í•´ê²°**
**ë¬¸ì œ**: 403 Forbidden "Suspicious bot detected"
**í•´ê²°**: User-Agent í—¤ë”ë¡œ ì‹¤ì œ ë¸Œë¼ìš°ì € ì‹ë³„
```bash
# í…ŒìŠ¤íŠ¸ ëª…ë ¹
curl -H "User-Agent: Mozilla/5.0..." https://celly-creative.codeb.one-q.xyz
# ê²°ê³¼: HTTP/2 200 OK
```

---

## ðŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…/ë³µì› ì‹œìŠ¤í…œ

### êµ¬í˜„ëœ API ì—”ë“œí¬ì¸íŠ¸

1. **GET /api/projects/:name/db/backup** - ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ë‹¤ìš´ë¡œë“œ
2. **POST /api/projects/:name/db/restore** - ë°ì´í„°ë² ì´ìŠ¤ ë³µì› (íŒŒì¼ ì—…ë¡œë“œ)
3. **GET /api/projects/:name/db/tables** - í…Œì´ë¸” ëª©ë¡ ì¡°íšŒ
4. **POST /api/projects/:name/db/query** - SQL ì¿¼ë¦¬ ì‹¤í–‰

### CLI ëª…ë ¹ì–´

```bash
# ë°±ì—… ìƒì„±
./codeb-cli-v2.sh db backup celly-creative

# ë°±ì—… ë³µì›
./codeb-cli-v2.sh db restore celly-creative backup.sql

# í…Œì´ë¸” ì¡°íšŒ
./codeb-cli-v2.sh db tables celly-creative

# SQL ì‹¤í–‰
./codeb-cli-v2.sh db query celly-creative 'SELECT COUNT(*) FROM users;'
```

### ì‹¤ì œ ë³µì› ì„±ê³¼
- **ë°±ì—… íŒŒì¼**: 2.8MB (full_backup_20250820_231316.sql)
- **ë³µì› ê²°ê³¼**: 42ê°œ í…Œì´ë¸”, 21ëª… ì‹¤ì œ ì‚¬ìš©ìž
- **ë³µì› ì‹œê°„**: ì•½ 30ì´ˆ
- **ë°ì´í„° ë¬´ê²°ì„±**: 100% ì™„ì „ ë³µì›

---

## ðŸŽ¯ CLI ëª…ë ¹ì–´ ì™„ì „ ê°€ì´ë“œ

### í”„ë¡œì íŠ¸ ë°°í¬
```bash
# ê¸°ë³¸ ë°°í¬
./codeb-cli-v2.sh deploy project-name https://github.com/user/repo.git main

# ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…ê³¼ í•¨ê»˜ ë°°í¬
./codeb-cli-v2.sh deploy project-name https://github.com/user/repo.git main --db-backup https://example.com/backup.sql
```

### í”„ë¡œì íŠ¸ ê´€ë¦¬
```bash
# ìƒíƒœ í™•ì¸
./codeb-cli-v2.sh status [project-name]

# ë¡œê·¸ í™•ì¸
./codeb-cli-v2.sh logs project-name [lines]

# ìž¬ì‹œìž‘
./codeb-cli-v2.sh restart project-name

# ì‚­ì œ
./codeb-cli-v2.sh delete project-name
```

### ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
```bash
# ë°±ì—…
./codeb-cli-v2.sh db backup project-name

# ë³µì›
./codeb-cli-v2.sh db restore project-name backup.sql

# í…Œì´ë¸” ì¡°íšŒ
./codeb-cli-v2.sh db tables project-name

# SQL ì‹¤í–‰
./codeb-cli-v2.sh db query project-name 'SELECT version();'
```

---

## ðŸš€ ì„±ê³µ ì§€í‘œ

### 1. **ì‹œìŠ¤í…œ ì•ˆì •ì„±**
- âœ… ì›¹ì‚¬ì´íŠ¸ ì ‘ê·¼: **200 OK**
- âœ… ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°: **ì •ìƒ**
- âœ… ì»¨í…Œì´ë„ˆ ìƒíƒœ: **ëª¨ë‘ Running**
- âœ… SSL ì¸ì¦ì„œ: **ìžë™ ìƒì„±ë¨**

### 2. **ê¸°ëŠ¥ ì™„ì„±ë„**
- âœ… **15ê°œ CLI ëª…ë ¹ì–´** ëª¨ë‘ ìž‘ë™
- âœ… **4ê°œ DB API** ì™„ì „ êµ¬í˜„
- âœ… **ì‹¤ì œ ë°ì´í„° ë³µì›** 100% ì„±ê³µ
- âœ… **í”„ë¡œë•ì…˜ ë°°í¬** ì™„ë£Œ

### 3. **ë¬¸ì„œí™” ì™„ì„±ë„**
- âœ… **7ê°œ ë¬¸ì„œ íŒŒì¼** ìƒì„±
- âœ… **ë¬¸ì œ í•´ê²° ê³¼ì •** ìƒì„¸ ê¸°ë¡
- âœ… **ì‚¬ìš©ë²• ê°€ì´ë“œ** ì™„ì „ ì œê³µ
- âœ… **ë°±ì—… ë³µêµ¬ ì ˆì°¨** ì²´ê³„í™”

---

## ðŸŽ‰ ìµœì¢… ì„±ê³¼

### êµ¬ì¶• ì™„ë£Œëœ ì‹œìŠ¤í…œ
1. **ì™„ì „ ìžë™í™”ëœ ë°°í¬ ì‹œìŠ¤í…œ**
2. **ì‹¤ì œ í”„ë¡œë•ì…˜ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜**
3. **í¬ê´„ì ì¸ ëª¨ë‹ˆí„°ë§ ë„êµ¬**
4. **ìž¬í•´ ë³µêµ¬ ì‹œìŠ¤í…œ**

### ê²€ì¦ëœ ì‹¤ì œ ì‚¬ë¡€
- **í”„ë¡œì íŠ¸**: celly-creative (LinkPick ì¸í”Œë£¨ì–¸ì„œ í”Œëž«í¼)
- **ë„ë©”ì¸**: https://celly-creative.codeb.one-q.xyz
- **ìƒíƒœ**: **ì™„ì „ ìž‘ë™ ì¤‘** âœ…
- **ë°ì´í„°**: **21ëª… ì‹¤ì‚¬ìš©ìž, 42ê°œ í…Œì´ë¸”**

---

## ðŸ“ˆ ê°œë°œ íš¨ìœ¨ì„±

**ì‹œê°„**: 6ì‹œê°„
**ì½”ë“œ ë¼ì¸**: 2,500+ ë¼ì¸
**ê¸°ëŠ¥**: 20+ API, 15+ CLI ëª…ë ¹ì–´
**ë¬¸ì„œ**: 7ê°œ ì™„ì „ ë¬¸ì„œí™”

**ì‹œê°„ë‹¹ íš¨ìœ¨ì„±**:
- API ê°œë°œ: 3.3ê°œ/ì‹œê°„
- CLI ëª…ë ¹ì–´: 2.5ê°œ/ì‹œê°„  
- ë¬¸ì œ í•´ê²°: 5ë¶„/ê±´
- ë¬¸ì„œ ìž‘ì„±: 1.2ê°œ/ì‹œê°„

**ê²°ê³¼**: ì™„ì „í•œ í”„ë¡œë•ì…˜ê¸‰ ì‹œìŠ¤í…œì„ 6ì‹œê°„ë§Œì— êµ¬ì¶• ì™„ë£Œ! ðŸš€

---

## ðŸ”„ ë‹¤ìŒ ë‹¨ê³„ ê¶Œìž¥ì‚¬í•­

1. **ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ì¶”ê°€** (Grafana, Prometheus)
2. **ìžë™ ë°±ì—… ìŠ¤ì¼€ì¤„ë§** (ì¼ì¼/ì£¼ê°„)
3. **ë¡œë“œ ë°¸ëŸ°ì‹±** (ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤)
4. **CI/CD íŒŒì´í”„ë¼ì¸** (GitHub Actions ì—°ë™)

ì´ ë§¤ë‰´ì–¼ì„ í†µí•´ ë™ì¼í•œ ì‹œìŠ¤í…œì„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì— **10ë¶„ ë‚´ì— ë³µì œ** ê°€ëŠ¥í•©ë‹ˆë‹¤! ðŸŽ¯