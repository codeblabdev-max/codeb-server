# ============================================================================
# CodeB /we: CLI Configuration v7.0.41
# 이 파일을 프로젝트 .env에 복사하여 사용하세요
#
# 설정 우선순위:
#   1. 환경 변수 (export CODEB_API_KEY=...)
#   2. 프로젝트 .env 파일
#   3. ~/.codeb/config.json
# ============================================================================

# ==================== 필수 설정 ====================

# CodeB API Key (필수)
# 형식: codeb_{teamId}_{role}_{token}
# 팀 관리자에게 발급받으세요
CODEB_API_KEY=

# ==================== 도메인 관리 API (팀원용) ====================
# SSH 권한 없이 도메인 설정 가능

# PowerDNS API (DNS 레코드 관리)
# App Server에서 실행 중인 PowerDNS API
PDNS_API_URL=http://158.247.203.55:8081/api/v1
PDNS_API_KEY=

# Caddy Admin API (Reverse Proxy 관리)
# App Server에서 실행 중인 Caddy Admin API
CADDY_API_URL=http://158.247.203.55:2019
CADDY_API_KEY=

# ==================== 데이터베이스 설정 ====================

# PostgreSQL 연결 정보
DATABASE_URL=postgresql://codeb:password@64.176.226.119:5432/codeb

# Redis 연결 정보
REDIS_URL=redis://64.176.226.119:6379

# ==================== 기본 도메인 ====================

# 서브도메인용 기본 도메인
CODEB_DOMAIN=codeb.kr

# App Server IP (도메인 설정 시 사용)
APP_SERVER_IP=158.247.203.55

# ==================== 선택 설정 (외부 API) ====================

# Vultr API Key (SSH 키 관리용 - 관리자 전용)
# 발급: https://my.vultr.com/settings/#settingsapi
VULTR_API_KEY=

# GitHub Personal Access Token
# 발급: https://github.com/settings/tokens
# 권한: repo, workflow, write:packages
GITHUB_TOKEN=

# ============================================================================
# 사용 예시
# ============================================================================
#
# 1. 도메인 설정 (팀원도 가능)
#    /we:domain setup myapp.codeb.kr
#    → PDNS_API_KEY와 CADDY_API_KEY가 설정되어 있으면 SSH 없이 작동
#
# 2. 프로젝트 초기화
#    /we:init myapp
#    → 도메인 자동 설정 포함
#
# 3. Quick 배포
#    /we:quick
#    → 전체 플로우 (도메인 → ENV → 배포)
#
# ============================================================================
# API Key 발급 안내 (관리자용)
# ============================================================================
#
# PowerDNS API Key 확인:
#   ssh root@158.247.203.55 "cat /etc/powerdns/pdns.conf | grep api-key"
#
# Caddy Admin API 활성화:
#   Caddyfile 상단에 추가:
#   {
#     admin :2019
#   }
#   그 후: systemctl reload caddy
#
# ============================================================================
