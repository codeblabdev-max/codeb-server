---
allowed-tools: [Read, Write, Edit, Bash, Glob, TodoWrite, Task, mcp__codeb-deploy__workflow_init, mcp__codeb-deploy__workflow_scan, mcp__codeb-deploy__deploy_project, mcp__codeb-deploy__slot_status, mcp__codeb-deploy__slot_promote, mcp__codeb-deploy__health_check, mcp__codeb-deploy__domain_setup, mcp__codeb-deploy__domain_list]
description: "íŒ€ì›ìš© í†µí•© ëª…ë ¹ì–´ - ìŠ¤ìº” â†’ ì„¤ì • â†’ ë°°í¬ ìë™í™”"
---

# /we:quick - íŒ€ì›ìš© í†µí•© ëª…ë ¹ì–´ (v7.0)

## ğŸ¯ ëª©ì 
íŒ€ì›ì´ **í•œ ë²ˆì˜ ëª…ë ¹ì–´ë¡œ** í”„ë¡œì íŠ¸ ì„¤ì •ë¶€í„° ë°°í¬ê¹Œì§€ ì™„ë£Œ.
ìŠ¤ìº”ìœ¼ë¡œ ì‹ ê·œ/ê¸°ì¡´ ìë™ ê°ì§€ â†’ í•„ìš”í•œ ì‘ì—…ë§Œ ìˆ˜í–‰.

## ì‚¬ìš©ë²•
```
/we:quick [í”„ë¡œì íŠ¸ëª…] [--env staging|production]
```

## ì‹¤í–‰ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    /we:quick ì‹¤í–‰ íë¦„                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1ï¸âƒ£ ìŠ¤ìº” (í•­ìƒ ë¨¼ì €)                                            â”‚
â”‚     â”œâ”€ SSOTì— í”„ë¡œì íŠ¸ ìˆë‚˜?                                    â”‚
â”‚     â”œâ”€ Appì„œë²„ì— ENV ìˆë‚˜?                                      â”‚
â”‚     â”œâ”€ Storageì„œë²„ì— DB/Redis ìˆë‚˜?                             â”‚
â”‚     â””â”€ ë„ë©”ì¸ ì„¤ì • ìˆë‚˜?                                        â”‚
â”‚                                                                 â”‚
â”‚  2ï¸âƒ£ ë¶„ê¸°                                                        â”‚
â”‚     â”œâ”€ ì‹ ê·œ â†’ ì„œë²„ë³„ ë¦¬ì†ŒìŠ¤ ìƒì„±                                â”‚
â”‚     â””â”€ ê¸°ì¡´ â†’ í˜„ì¬ ìƒíƒœ ì¶œë ¥                                    â”‚
â”‚                                                                 â”‚
â”‚  3ï¸âƒ£ ë°°í¬ (ì„ íƒ)                                                 â”‚
â”‚     â””â”€ ì‚¬ìš©ì í™•ì¸ í›„ ë°°í¬                                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 1ë‹¨ê³„: ìŠ¤ìº”

```
ë¡œì»¬:
â”œâ”€ package.json â†’ í”„ë¡œì íŠ¸ëª…, íƒ€ì… ê°ì§€
â””â”€ .github/workflows/ â†’ ì›Œí¬í”Œë¡œìš° ì¡´ì¬ ì—¬ë¶€

ì„œë²„ (MCP í†µí•´):
â”œâ”€ App (158.247.203.55)
â”‚  â”œâ”€ /opt/codeb/registry/ssot.json â†’ í”„ë¡œì íŠ¸ ë“±ë¡ ì—¬ë¶€
â”‚  â””â”€ /opt/codeb/env/{project}/ â†’ ENV íŒŒì¼ ì¡´ì¬ ì—¬ë¶€
â”‚
â””â”€ Storage (64.176.226.119)
   â”œâ”€ PostgreSQL â†’ {project}_db ì¡´ì¬ ì—¬ë¶€
   â””â”€ Redis â†’ DB ë²ˆí˜¸ í• ë‹¹ ì—¬ë¶€
```

## 2ë‹¨ê³„: ì‹ ê·œ í”„ë¡œì íŠ¸ â†’ ì„œë²„ë³„ ìƒì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì‹ ê·œ í”„ë¡œì íŠ¸ ìë™ ìƒì„±                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  App Server (158.247.203.55)                                    â”‚
â”‚  â”œâ”€ SSOT ë“±ë¡: í”„ë¡œì íŠ¸ëª…, í¬íŠ¸ í• ë‹¹                            â”‚
â”‚  â”œâ”€ ENV ìƒì„±: /opt/codeb/env/{project}/staging/.env            â”‚
â”‚  â”œâ”€ ENV ìƒì„±: /opt/codeb/env/{project}/production/.env         â”‚
â”‚  â”œâ”€ ENV ë°±ì—…: /opt/codeb/env-backup/{project}/                 â”‚
â”‚  â””â”€ Caddy ë„ë©”ì¸: {project}.codeb.kr                           â”‚
â”‚                                                                 â”‚
â”‚  Storage Server (64.176.226.119)                                â”‚
â”‚  â”œâ”€ PostgreSQL: CREATE DATABASE {project}_db                   â”‚
â”‚  â”œâ”€ PostgreSQL: CREATE USER {project}_user WITH PASSWORD       â”‚
â”‚  â””â”€ Redis: DB ë²ˆí˜¸ í• ë‹¹ (SSOTì—ì„œ ê´€ë¦¬)                         â”‚
â”‚                                                                 â”‚
â”‚  ê²°ê³¼ â†’ ENV íŒŒì¼ì— ìë™ ë°˜ì˜:                                    â”‚
â”‚  DATABASE_URL=postgres://{user}:{pass}@db.codeb.kr:5432/{db}   â”‚
â”‚  REDIS_URL=redis://db.codeb.kr:6379/{db_num}                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2ë‹¨ê³„: ê¸°ì¡´ í”„ë¡œì íŠ¸ â†’ ìƒíƒœ ì¶œë ¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š myapp í˜„ì¬ ìƒíƒœ                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  SSOT: âœ… ë“±ë¡ë¨                                        â”‚
â”‚  í¬íŠ¸: staging 4500/4501, production 4100/4101         â”‚
â”‚                                                         â”‚
â”‚  Staging                                                â”‚
â”‚  â”œâ”€ Blue:  âœ… active  (v1.2.3)                         â”‚
â”‚  â””â”€ Green: â¬š empty                                     â”‚
â”‚                                                         â”‚
â”‚  Production                                             â”‚
â”‚  â”œâ”€ Blue:  â¸ grace   (v1.2.2)                          â”‚
â”‚  â””â”€ Green: âœ… active  (v1.2.3)                         â”‚
â”‚                                                         â”‚
â”‚  ENV: âœ… staging, âœ… production                         â”‚
â”‚  DB:  âœ… myapp_db                                       â”‚
â”‚  ë„ë©”ì¸: myapp.codeb.kr                                 â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3ë‹¨ê³„: ë°°í¬

```
ë°°í¬ ë°©ë²•:
1. git push (ê¶Œì¥) â†’ ì›Œí¬í”Œë¡œìš° ìë™ ì‹¤í–‰
2. /we:quick --deploy â†’ MCP í†µí•´ ì§ì ‘ ë°°í¬
```

## Git ì›Œí¬í”Œë¡œìš° ë£°

```
main/master  â†’ production ìë™ ë°°í¬
develop      â†’ staging ìë™ ë°°í¬
feature/*    â†’ preview í™˜ê²½ (PR)
```

ì›Œí¬í”Œë¡œìš°ëŠ” SSOT íŒŒì¼ì—ì„œ í¬íŠ¸ë¥¼ ì½ìŒ:
```yaml
- name: Get port from SSOT
  run: |
    PORT=$(jq -r '.projects["'$PROJECT'"].ports.production.blue' /opt/codeb/registry/ssot.json)
```

## SSOT êµ¬ì¡°

```json
{
  "version": "7.0",
  "projects": {
    "myapp": {
      "type": "nextjs",
      "ports": {
        "staging": { "blue": 4500, "green": 4501 },
        "production": { "blue": 4100, "green": 4101 }
      },
      "database": { "name": "myapp_db", "user": "myapp_user" },
      "redis": { "db": 1 },
      "domain": "myapp.codeb.kr"
    }
  },
  "ports": { "used": [4100, 4101, 4500, 4501] }
}
```

## í¬íŠ¸ ë²”ìœ„

| í™˜ê²½ | ë²”ìœ„ | ìš©ë„ |
|------|------|------|
| production | 4100-4499 | Blue-Green |
| staging | 4500-4999 | Blue-Green |
| preview | 5000-5499 | PR Preview |

## íŒ€ì›ìš© .env (ìµœì†Œ í•„ìˆ˜)

```bash
CODEB_API_URL=https://api.codeb.kr
CODEB_API_KEY=codeb_codeb_member_xxxxx
```

## Admin ì „ìš© ëª…ë ¹ì–´

- `/we:init` - ì„œë²„ ì¸í”„ë¼ ì§ì ‘ ê´€ë¦¬
- `/we:workflow` - CI/CD ìƒì„¸ ê´€ë¦¬
- `/we:domain` - ë„ë©”ì¸ ì„¤ì •
- `/we:registry` - SSOT ì§ì ‘ ìˆ˜ì •
- `/we:ssh` - SSH í‚¤ ê´€ë¦¬
